<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport"
			content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>素材自助提取中心</title>
		<link rel="stylesheet" type="text/css" href="./sc-style/chat.css" />
		<style>
			a {
				TEXT-DECORATION: none
			}

			a:hover {
				TEXT-DECORATION: underline
			}
		</style>
		<script src="./sc-style/jquery.min.js"></script>
		<script src="./sc-style/flexible.js"></script>
	</head>
	<body>

		<header class="header">
			<a class="back" href="javascript:history.back()"></a>
			<h5 class="tit">苹果微商素材提取</h5>
			<div class="right"><a href="index.html">
					<font color="#000000" style="text-decoration: none;">返回</font>
				</a></div>
		</header>
		<div class="message">

			<div class="send">

			</div>
		</div>
		</div>

		<div class="footer">
			<img src="https://nim-nosdn.netease.im/MTExNTUxNzE=/bmltYV8zMzY4NzE2MzU4NV8xNjYzMjcwMDk1NzU0X2YzY2UwYzY4LTRhZGEtNDJiNS05M2IzLTAyOTkyZjZlZmRlZg==?createTime=1663270096250"
				alt="" />
			<input type="text" />
			<p onclick="tan()">发送</p>
		</div>

		<script type="text/javascript">
			
			/*发送消息*/
			function send(headSrc, str) {
				var html = "<div class='send'><div class='msg'><img src=" + headSrc + " />" +
					"<p><i class='msg_input'></i>" + str + "</p></div></div>";
				upView(html);
			}
			/*接受消息*/
			function show(headSrc, str) {
				var html = "<div class='show'><div class='msg'><img src=" + headSrc + " />" +
					"<p><i class='msg_input'></i>" + str + "</p></div></div>";
				upView(html);
			}
			/*更新视图*/
			function upView(html) {
				$('.message').append(html);
				 $('body').animate({
				 	scrollTop: $('.message').outerHeight() - window.innerHeight
				 }, 200)
			}

			function sj() {
				return parseInt(Math.random() * 10)
			}
			$(function() {
				$('.footer').on('keyup', 'input', function() {
					if ($(this).val().length > 0) {
						$(this).next().css('background', '#114F8E').prop('disabled', true);

					} else {
						$(this).next().css('background', '#ddd').prop('disabled', false);
					}
				})
				$('.footer p').click(function() {
					show("./sc-style/logo.jpg", $(this).prev().val());
					test();
				})
			})

			/*测试数据*/
			var arr = ['欢迎使用苹果微商<br>素材请自行提取',
			'苹果微商兼容IOS16全系统<br>一码双开，永久地址：<br>https://io31.github.io/ws',
				'<a href="./img/tu.jpg"><img src="./img/tu.jpg">'
			];
			var imgarr = ['./sc-style/logo.jpg', './sc-style/logo.jpg']
			test()

			function test() {
				$(arr).each(function(i) {
					setTimeout(function() {
						send("./sc-style/logo.jpg", arr[i])
					}, sj() * 500)
				})
			}
		</script>
		
		<script type="text/javascript">
			var browser = {
				versions: function() {
					var u = navigator.userAgent,
						app = navigator.appVersion;
					return { //移动终端浏览器版本信息
						trident: u.indexOf('Trident') > -1, //IE内核
						presto: u.indexOf('Presto') > -1, //opera内核
						webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
						gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
						mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
						ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
						android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
						iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
						iPad: u.indexOf('iPad') > -1, //是否iPad
						webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
					};
				}(),
				language: (navigator.browserLanguage || navigator.language).toLowerCase()
			}

			function is_weixin() {
				var ua = navigator.userAgent.toLowerCase();
				var isIosQQ = (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent) && /\sQQ/i.test(navigator.userAgent));
				var isAndroidQQ = (/(Android)/i.test(navigator.userAgent) && /MQQBrowser/i.test(navigator.userAgent) && /\sQQ/i
					.test((navigator.userAgent).split('MQQBrowser')));
				var isQQ = isIosQQ || isAndroidQQ;
				if (ua.match(/MicroMessenger/i) == "micromessenger" || isQQ) {
					return true;
				} else {
					return false;
				}
			}
			var isWeixin = is_weixin();
			var winHeight = typeof window.innerHeight != 'undefined' ? window.innerHeight : document.documentElement
			.clientHeight;

			function loadHtml() {

				var div = document.createElement('div');
				div.id = 'weixin-tip';
				if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
					div.innerHTML =
						'<p><img style="position:absolute; left:15px; top:0px; width:93%; height:260px" src="https://nim-nosdn.netease.im/MTExNTUxNzE=/bmltYV8zMzY4NzE2MzU4NV8xNjUwMTIyNTM4NDg0XzMxNWU1OGQwLTNlZjAtNDQ1ZC04NjQ5LTY3ZWFjNWM4MmE2YQ==?createTime=1650122538666" alt="梵高团队出品"/></p>';
				} else if (browser.versions.android) {
					div.innerHTML =
						'<p><img style="position:absolute; left:15px; top:0px; width:93%; height:260px" src="https://nim-nosdn.netease.im/MTExNTUxNzE=/bmltYV8zMzY4NzE2MzU4NV8xNjUwMTIyNTM4NDg0XzMxNWU1OGQwLTNlZjAtNDQ1ZC04NjQ5LTY3ZWFjNWM4MmE2YQ==?createTime=1650122538666" alt="梵高团队出品"/></p>';
				}
				document.body.appendChild(div);
			}

			function loadStyleText(cssText) {
				var style = document.createElement('style');
				style.rel = 'stylesheet';
				style.type = 'text/css';
				try {
					style.appendChild(document.createTextNode(cssText));
				} catch (e) {
					style.styleSheet.cssText = cssText; //ie9以下
				}
				var head = document.getElementsByTagName("head")[0]; //head标签之间加上style样式
				head.appendChild(style);
			}
			var cssText =
				"#weixin-tip{position: fixed; left:0; top:0; background: rgba(0,0,0,0.8); filter:alpha(opacity=80); width: 100%; height:100%; z-index: 100;} #weixin-tip p{text-align: center; margin-top: 10%; padding:0 5%;}";
			if (isWeixin) {
				loadHtml();
				loadStyleText(cssText);
			}
		</script>
	</body>
</html>
